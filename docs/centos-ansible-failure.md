# centos-ansible-failure.md

```shell
TASK [../../ : Centos | Upgrade all CentOS system to latest package versions] ***
task path: /home/users/csteel/projects/ace-dev/ace/roles/upgrade/tasks/main.yml:11
changed: [centos6] => {"changed": true, "msg": "", "rc": 0, "results": ["Loaded plugins: fastestmirror, security\nSetting up Update Process\nLoading mirror speeds from cached hostfile\n * base: centos.mirror.colo-serv.net\n * extras: centos.mirror.ca.planethoster.net\n * updates: centos.bhs.mirrors.ovh.net\nResolving Dependencies\n--> Running transaction check\n---> Package dhclient.x86_64 12:4.1.1-53.P1.el6.centos.3 will be updated\n---> Package dhclient.x86_64 12:4.1.1-53.P1.el6.centos.4 will be an update\n---> Package dhcp-common.x86_64 12:4.1.1-53.P1.el6.centos.3 will be updated\n---> Package dhcp-common.x86_64 12:4.1.1-53.P1.el6.centos.4 will be an update\n---> Package kernel.x86_64 0:2.6.32-696.30.1.el6 will be installed\n---> Package kernel-firmware.noarch 0:2.6.32-696.28.1.el6 will be updated\n---> Package kernel-firmware.noarch 0:2.6.32-696.30.1.el6 will be an update\n---> Package procps.x86_64 0:3.2.8-45.el6_9.1 will be updated\n---> Package procps.x86_64 0:3.2.8-45.el6_9.3 will be an update\n--> Finished Dependency Resolution\n\nDependencies Resolved\n\n================================================================================\n Package            Arch      Version                          Repository  Size\n================================================================================\nInstalling:\n kernel             x86_64    2.6.32-696.30.1.el6              updates     32 M\nUpdating:\n dhclient           x86_64    12:4.1.1-53.P1.el6.centos.4      updates    322 k\n dhcp-common        x86_64    12:4.1.1-53.P1.el6.centos.4      updates    145 k\n kernel-firmware    noarch    2.6.32-696.30.1.el6              updates     29 M\n procps             x86_64    3.2.8-45.el6_9.3                 updates    220 k\n\nTransaction Summary\n================================================================================\nInstall       1 Package(s)\nUpgrade       4 Package(s)\n\nTotal download size: 62 M\nDownloading Packages:\n--------------------------------------------------------------------------------\nTotal                                           3.5 MB/s |  62 MB     00:17     \nRunning rpm_check_debug\nRunning Transaction Test\nTransaction Test Succeeded\nRunning Transaction\n\r  Updating   : kernel-firmware-2.6.32-696.30.1.el6.noarch                   1/9 \n\r  Updating   : 12:dhcp-common-4.1.1-53.P1.el6.centos.4.x86_64               2/9 \n\r  Updating   : 12:dhclient-4.1.1-53.P1.el6.centos.4.x86_64                  3/9 \n\r  Installing : kernel-2.6.32-696.30.1.el6.x86_64                            4/9 \n\r  Updating   : procps-3.2.8-45.el6_9.3.x86_64                               5/9 \n\r  Cleanup    : 12:dhclient-4.1.1-53.P1.el6.centos.3.x86_64                  6/9 \n\r  Cleanup    : 12:dhcp-common-4.1.1-53.P1.el6.centos.3.x86_64               7/9 \n\r  Cleanup    : kernel-firmware-2.6.32-696.28.1.el6.noarch                   8/9 \n\r  Cleanup    : procps-3.2.8-45.el6_9.1.x86_64                               9/9 \nVirtualBox Guest Additions: Building the VirtualBox Guest Additions kernel modules.\n\r  Verifying  : 12:dhcp-common-4.1.1-53.P1.el6.centos.4.x86_64               1/9 \n\r  Verifying  : 12:dhclient-4.1.1-53.P1.el6.centos.4.x86_64                  2/9 \n\r  Verifying  : procps-3.2.8-45.el6_9.3.x86_64                               3/9 \n\r  Verifying  : kernel-2.6.32-696.30.1.el6.x86_64                            4/9 \n\r  Verifying  : kernel-firmware-2.6.32-696.30.1.el6.noarch                   5/9 \n\r  Verifying  : 12:dhcp-common-4.1.1-53.P1.el6.centos.3.x86_64               6/9 \n\r  Verifying  : procps-3.2.8-45.el6_9.1.x86_64                               7/9 \n\r  Verifying  : kernel-firmware-2.6.32-696.28.1.el6.noarch                   8/9 \n\r  Verifying  : 12:dhclient-4.1.1-53.P1.el6.centos.3.x86_64                  9/9 \n\nInstalled:\n  kernel.x86_64 0:2.6.32-696.30.1.el6                                           \n\nUpdated:\n  dhclient.x86_64 12:4.1.1-53.P1.el6.centos.4                                   \n  dhcp-common.x86_64 12:4.1.1-53.P1.el6.centos.4                                \n  kernel-firmware.noarch 0:2.6.32-696.30.1.el6                                  \n  procps.x86_64 0:3.2.8-45.el6_9.3                                              \n\nComplete!\n"]}

TASK [../../ : CentOS | Clean cache] *******************************************
task path: /home/users/csteel/projects/ace-dev/ace/roles/upgrade/tasks/main.yml:20
 [WARNING]: Consider using the yum module rather than running yum.  If you need
to use command because yum is insufficient you can add warn=False to this
command task or set command_warnings=False in ansible.cfg to get rid of this
message.

fatal: [centos6]: FAILED! => {"changed": true, "cmd": ["yum", "clean", "cache"], "delta": "0:00:00.326363", "end": "2018-06-04 18:44:19.928619", "msg": "non-zero return code", "rc": 1, "start": "2018-06-04 18:44:19.602256", "stderr": "Error: invalid clean argument: 'cache'", "stderr_lines": ["Error: invalid clean argument: 'cache'"], "stdout": "Loaded plugins: fastestmirror, security\nUsage: yum [options] COMMAND\n\nList of Commands:\n\ncheck          Check for problems in the rpmdb\ncheck-update   Check for available package updates\nclean          Remove cached data\ndeplist        List a package's dependencies\ndistribution-synchronization Synchronize installed packages to the latest available versions\ndowngrade      downgrade a package\nerase          Remove a package or packages from your system\ngroupinfo      Display details about a package group\ngroupinstall   Install the packages in a group on your system\ngrouplist      List available package groups\ngroupremove    Remove the packages in a group from your system\nhelp           Display a helpful usage message\nhistory        Display, or use, the transaction history\ninfo           Display details about a package or group of packages\ninstall        Install a package or packages on your system\nlist           List a package or groups of packages\nload-transaction load a saved transaction from filename\nmakecache      Generate the metadata cache\nprovides       Find what package provides the given value\nreinstall      reinstall a package\nrepolist       Display the configured software repositories\nresolvedep     Determine which package provides the given dependency\nsearch         Search package details for the given string\nshell          Run an interactive yum shell\nupdate         Update a package or packages on your system\nupdate-minimal Works like update, but goes to the 'newest' package match which fixes a problem that affects your system\nupdateinfo     Acts on repository update information\nupgrade        Update packages taking obsoletes into account\nversion        Display a version for the machine and/or available repos.\n\n\nOptions:\n  -h, --help            show this help message and exit\n  -t, --tolerant        be tolerant of errors\n  -C, --cacheonly       run entirely from system cache, don't update cache\n  -c [config file], --config=[config file]\n                        config file location\n  -R [minutes], --randomwait=[minutes]\n                        maximum command wait time\n  -d [debug level], --debuglevel=[debug level]\n                        debugging output level\n  --showduplicates      show duplicates, in repos, in list/search commands\n  -e [error level], --errorlevel=[error level]\n                        error output level\n  --rpmverbosity=[debug level name]\n                        debugging output level for rpm\n  -q, --quiet           quiet operation\n  -v, --verbose         verbose operation\n  -y, --assumeyes       answer yes for all questions\n  --assumeno            answer no for all questions\n  --version             show Yum version and exit\n  --installroot=[path]  set install root\n  --enablerepo=[repo]   enable one or more repositories (wildcards allowed)\n  --disablerepo=[repo]  disable one or more repositories (wildcards allowed)\n  -x [package], --exclude=[package]\n                        exclude package(s) by name or glob\n  --disableexcludes=[repo]\n                        disable exclude from main, for a repo or for\n                        everything\n  --obsoletes           enable obsoletes processing during updates\n  --noplugins           disable Yum plugins\n  --nogpgcheck          disable gpg signature checking\n  --disableplugin=[plugin]\n                        disable plugins by name\n  --enableplugin=[plugin]\n                        enable plugins by name\n  --skip-broken         skip packages with depsolving problems\n  --color=COLOR         control whether color is used\n  --releasever=RELEASEVER\n                        set value of $releasever in yum config and repo files\n  --downloadonly        don't update, just download\n  --downloaddir=DLDIR   specifies an alternate directory to store packages\n  --setopt=SETOPTS      set arbitrary config and repo options\n\n  Plugin Options:\n    --security          Include security relevant packages\n    --bugfixes          Include bugfix relevant packages\n    --cve=CVE           Include packages needed to fix the given CVE\n    --bz=BZ             Include packages needed to fix the given BZ\n    --sec-severity=SEVERITY\n                        Include security relevant packages, of this severity\n    --advisory=ADVISORY\n                        Include packages needed to fix the given advisory", "stdout_lines": ["Loaded plugins: fastestmirror, security", "Usage: yum [options] COMMAND", "", "List of Commands:", "", "check          Check for problems in the rpmdb", "check-update   Check for available package updates", "clean          Remove cached data", "deplist        List a package's dependencies", "distribution-synchronization Synchronize installed packages to the latest available versions", "downgrade      downgrade a package", "erase          Remove a package or packages from your system", "groupinfo      Display details about a package group", "groupinstall   Install the packages in a group on your system", "grouplist      List available package groups", "groupremove    Remove the packages in a group from your system", "help           Display a helpful usage message", "history        Display, or use, the transaction history", "info           Display details about a package or group of packages", "install        Install a package or packages on your system", "list           List a package or groups of packages", "load-transaction load a saved transaction from filename", "makecache      Generate the metadata cache", "provides       Find what package provides the given value", "reinstall      reinstall a package", "repolist       Display the configured software repositories", "resolvedep     Determine which package provides the given dependency", "search         Search package details for the given string", "shell          Run an interactive yum shell", "update         Update a package or packages on your system", "update-minimal Works like update, but goes to the 'newest' package match which fixes a problem that affects your system", "updateinfo     Acts on repository update information", "upgrade        Update packages taking obsoletes into account", "version        Display a version for the machine and/or available repos.", "", "", "Options:", "  -h, --help            show this help message and exit", "  -t, --tolerant        be tolerant of errors", "  -C, --cacheonly       run entirely from system cache, don't update cache", "  -c [config file], --config=[config file]", "                        config file location", "  -R [minutes], --randomwait=[minutes]", "                        maximum command wait time", "  -d [debug level], --debuglevel=[debug level]", "                        debugging output level", "  --showduplicates      show duplicates, in repos, in list/search commands", "  -e [error level], --errorlevel=[error level]", "                        error output level", "  --rpmverbosity=[debug level name]", "                        debugging output level for rpm", "  -q, --quiet           quiet operation", "  -v, --verbose         verbose operation", "  -y, --assumeyes       answer yes for all questions", "  --assumeno            answer no for all questions", "  --version             show Yum version and exit", "  --installroot=[path]  set install root", "  --enablerepo=[repo]   enable one or more repositories (wildcards allowed)", "  --disablerepo=[repo]  disable one or more repositories (wildcards allowed)", "  -x [package], --exclude=[package]", "                        exclude package(s) by name or glob", "  --disableexcludes=[repo]", "                        disable exclude from main, for a repo or for", "                        everything", "  --obsoletes           enable obsoletes processing during updates", "  --noplugins           disable Yum plugins", "  --nogpgcheck          disable gpg signature checking", "  --disableplugin=[plugin]", "                        disable plugins by name", "  --enableplugin=[plugin]", "                        enable plugins by name", "  --skip-broken         skip packages with depsolving problems", "  --color=COLOR         control whether color is used", "  --releasever=RELEASEVER", "                        set value of $releasever in yum config and repo files", "  --downloadonly        don't update, just download", "  --downloaddir=DLDIR   specifies an alternate directory to store packages", "  --setopt=SETOPTS      set arbitrary config and repo options", "", "  Plugin Options:", "    --security          Include security relevant packages", "    --bugfixes          Include bugfix relevant packages", "    --cve=CVE           Include packages needed to fix the given CVE", "    --bz=BZ             Include packages needed to fix the given BZ", "    --sec-severity=SEVERITY", "                        Include security relevant packages, of this severity", "    --advisory=ADVISORY", "                        Include packages needed to fix the given advisory"]}
	to retry, use: --limit @/home/users/csteel/projects/ace-dev/ace/roles/upgrade/tests/vagrant.retry

PLAY RECAP *********************************************************************
centos6                    : ok=34   changed=1    unreachable=0    failed=1   
```
